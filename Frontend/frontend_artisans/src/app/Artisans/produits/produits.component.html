<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="btn-group mb-4">
                <button *ngFor="let categorie of categories" class="btn btn-outline-dark bg-secondary" (click)="filtrerParCategorie(categorie)">
                    <i class="bi bi-tag-fill me-1"></i> {{ categorie }}
                </button>
            </div>
        </div>
    </div>
    <div class="row">
        <div *ngFor="let produit of produitsFiltres" class="col-md-4 mb-4">
            <div class="card shadow-lg border-0 h-100">
                <img class="card-img-top img-fluid" src="{{produit.url}}" alt="{{produit.nom}}" style="height: 200px; object-fit: cover;">
                <div class="card-body">
                    <h5 class="card-title fw-bold text-primary">
                        <i class="bi bi-box-seam me-2"></i> {{produit.nom}}
                    </h5>
                    
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="card-subtitle text-success mb-0">
                            <i class="bi bi-cash-stack me-1"></i> {{produit.prix | number:'1.2-2'}} €
                        </h6>
                        <span class="badge bg-primary">
                            <i class="bi bi-box2 me-1"></i> {{produit.quantite}} unité(s)
                        </span>
                    </div>

                    <p class="card-text text-muted">{{produit.description}}</p>
                    
                    <div class="d-flex align-items-center mt-3">
                        <i class="bi bi-person-gear me-2 text-secondary"></i>
                        <small class="text-muted">Fabriqué par: {{produit.ArtisanName }}</small>
                    </div>
                </div>
                
                <div class="card-footer bg-transparent border-0">
                    <div class="d-grid gap-2">
                        <button class="btn" 
                                [class.btn-success]="produit.quantite > 0" 
                                [class.btn-danger]="produit.quantite <= 0"
                                (click)="commanderProduit(produit)" 
                                [disabled]="produit.quantite <= 0">
                            <i class="bi me-2" [class.bi-bag-check]="produit.quantite > 0" [class.bi-exclamation-triangle]="produit.quantite <= 0"></i> 
                            {{produit.quantite > 0 ? 'Commander' : 'Rupture'}}
                        </button>
                        <button class="btn btn-outline-primary" (click)="ajouterAuPanier(produit)" [disabled]="produit.quantite <= 0">
                            <i class="bi bi-cart-plus me-2"></i> Ajouter au panier
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
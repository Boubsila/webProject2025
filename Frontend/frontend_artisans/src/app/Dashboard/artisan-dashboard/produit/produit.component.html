
<div class="container mt-4">
    <div class="mb-3">
      <button class="btn btn-outline-secondary fw-bold rounded-pill" (click)="goToDashboard()">
        <i class="bi bi-arrow-left me-2"></i> Retour au tableau de bord
      </button>
    </div>
  
    <h2 class="text-center mb-4 text-primary fw-bold">Gestion de Mes Produits</h2>
  
    <div class="mb-3">
      <button class="btn btn-primary rounded-pill" (click)="openAddProductModal()">
        <i class="bi bi-plus-circle me-1"></i> Ajouter un Produit
      </button>
    </div>
  
    <div class="card shadow-lg rounded-4">
      <div class="card-body p-4">
        <div class="table-responsive">
          <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
              <tr>
                <th scope="col">Image</th>
                <th scope="col">Nom</th>
                <th scope="col">Description</th>
                <th scope="col">Prix</th>
                <th scope="col">Statut</th>
                <th scope="col" class="text-center">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let product of products">
                <td>
                  <img [src]="product.imageUrl" alt="Image du produit" class="img-fluid rounded-2" style="max-width: 50px;">
                </td>
                <td>{{ product.name }}</td>
                <td>{{ product.description }}</td>
                <td>{{ product.price }} â‚¬</td>
                <td>
                  <span class="badge" [ngClass]="{'bg-success': product.status === 'approved', 'bg-warning': product.status === 'pending', 'bg-danger': product.status === 'rejected'}">{{ product.status }}</span>
                </td>
                <td class="text-center">
                  <button class="btn btn-sm btn-primary rounded-pill me-2" (click)="openEditProductModal(product)">
                    <i class="bi bi-pencil me-1"></i> Modifier
                  </button>
                  <button class="btn btn-sm btn-danger rounded-pill" (click)="deleteProduct(product.id)">
                    <i class="bi bi-trash me-1"></i> Supprimer
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  
    <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="productModalLabel">{{ selectedProduct ? 'Modifier' : 'Ajouter' }} un Produit</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="closeModalFromButton()"></button>
              </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="productName" class="form-label">Nom du Produit</label>
                <input type="text" class="form-control" id="productName" [(ngModel)]="selectedProduct.name" name="name">
              </div>
              <div class="mb-3">
                <label for="productDescription" class="form-label">Description</label>
                <textarea class="form-control" id="productDescription" [(ngModel)]="selectedProduct.description" name="description"></textarea>
              </div>
              <div class="mb-3">
                <label for="productPrice" class="form-label">Prix</label>
                <input type="number" class="form-control" id="productPrice" [(ngModel)]="selectedProduct.price" name="price">
              </div>
              <div class="mb-3">
                <label for="productImage" class="form-label">Image</label>
                <input type="file" class="form-control" id="productImage" (change)="onFileSelected($event)">
                <img *ngIf="selectedProduct.imageUrl" [src]="selectedProduct.imageUrl" alt="Image du produit" class="img-fluid mt-2 rounded-2" style="max-height: 100px;">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary rounded-pill" (click)="closeModalFromButton()" data-bs-dismiss="modal">Annuler</button>
            <button type="button" class="btn btn-primary rounded-pill" (click)="saveProduct()">Enregistrer</button>
          </div>
        </div>
      </div>
    </div>
  </div>